<!DOCTYPE html>
<html>
<head>
  <title>Top 50 Cryptocurrencies</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: sans-serif; background: #f4f4f4; padding: 20px; }
    .crypto-market-section { background: #fff; border-radius: 8px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { padding: 10px; border-bottom: 1px solid #eee; text-align: center; }
    th { background: #f1f1f1; }
  </style>
</head>
<body>

<div class="crypto-market-section">
  <h2>Top 50 Cryptocurrencies - Live Market</h2>
  <table id="cryptoMarketTable">
    <thead>
      <tr>
        <th>#</th>
        <th>Name</th>
        <th>Symbol</th>
        <th>Price (USD)</th>
        <th>24h Change</th>
        <th>Market Cap</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<script>
  async function loadCryptoMarket() {
    try {
      const res = await fetch("https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=50&page=1&sparkline=false");
      const coins = await res.json();
      const tbody = document.querySelector("#cryptoMarketTable tbody");
      tbody.innerHTML = "";

      coins.forEach((coin, index) => {
        const row = `
          <tr>
            <td>${index + 1}</td>
            <td><img src="${coin.image}" width="20" style="vertical-align:middle;margin-right:6px;">${coin.name}</td>
            <td>${coin.symbol.toUpperCase()}</td>
            <td>$${coin.current_price.toLocaleString()}</td>
            <td style="color:${coin.price_change_percentage_24h >= 0 ? 'green' : 'red'};">
              ${coin.price_change_percentage_24h.toFixed(2)}%
            </td>
            <td>$${coin.market_cap.toLocaleString()}</td>
          </tr>`;
        tbody.innerHTML += row;
      });
    } catch (err) {
      console.error("Crypto fetch failed:", err);
    }
  }

  // Initial load
  loadCryptoMarket();
  // Auto-refresh every 1 min
  setInterval(loadCryptoMarket, 60000);
</script>

</body>
</html>
