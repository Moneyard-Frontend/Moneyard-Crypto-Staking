<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Financial Literacy & Micro Investments Course</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #f7f9fb; padding: 20px; }
    .container { max-width: 900px; margin: auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px #ccc; }
    .lesson, .quiz, .certificate { display: none; }
    .active { display: block; }
    h2 { color: #004d66; }
    button { padding: 10px 20px; background-color: #28a745; color: white; border: none; margin: 10px 0; border-radius: 5px; cursor: pointer; }
    button:hover { background-color: #218838; }
    .quiz label { display: block; margin: 8px 0; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Financial Literacy & Micro Investments Course</h1>

    <!-- LESSONS 1 to 10 -->
    <div id="lesson1" class="lesson active"><h2>Lesson 1: What is Financial Literacy?</h2><p>Itâ€™s the foundation of understanding how money works in the world: budgeting, investing, borrowing, saving, and more.</p><button onclick="nextLesson(2)">Next</button></div>
    <!-- (Other lessons here) -->

    <!-- QUIZ -->
    <div id="quiz" class="quiz">
      <h2>Final Quiz</h2>
      <form id="quizForm">
        <!-- Quiz questions here -->
        <button type="submit">Submit Quiz</button>
      </form>
    </div>

    <!-- CERTIFICATE -->
    <div id="certificate" class="certificate" style="text-align:center; padding:30px; border-top:1px solid #ccc;">
      <h2>Congratulations!</h2>
      <p>This certifies that:</p>
      <h3 id="certName">[Your Name]</h3>
      <p>has successfully completed the Financial Literacy & Micro Investments Course.</p>
      <p>Date: <span id="certDate"></span></p>
      <p>You can now download your certificate:</p>
      <button onclick="downloadCertificate()" style="padding: 12px 24px; background-color: #28a745; color: white; font-size: 16px; border: none; border-radius: 5px;">
        Download Certificate
      </button>
    </div>
  </div>

  <canvas id="certificateCanvas" style="display:none;"></canvas>

  <script>
    let current = 1;

    function nextLesson(num) {
      document.getElementById(`lesson${current}`).classList.remove('active');
      document.getElementById(`lesson${num}`).classList.add('active');
      current = num;
    }

    function startQuiz() {
      document.getElementById(`lesson${current}`).classList.remove('active');
      document.getElementById("quiz").classList.add('active');
    }

    document.getElementById("quizForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const answers = document.querySelectorAll('#quizForm input[type="radio"]:checked');
      let score = 0;
      answers.forEach(ans => { if (ans.value === "correct") score++; });

      if (score >= 8) {
        const name = prompt("Enter your full name for the certificate:");
        document.getElementById("quiz").classList.remove("active");
        document.getElementById("certificate").classList.add("active");
        document.getElementById("certName").textContent = name;
        document.getElementById("certDate").textContent = new Date().toLocaleDateString();
      } else {
        alert(`You scored ${score}/10. You need 8 or more to pass. Please review lessons and try again.`);
      }
    });

    function downloadCertificate() {
      const canvas = document.getElementById('certificateCanvas');
      const context = canvas.getContext('2d');
      
      // Load the original certificate image
      const certificateImage = new Image();
      certificateImage.src = 'certificate.png'; // Your certificate template image
      certificateImage.onload = function() {
        // Set canvas size to match the certificate image
        canvas.width = certificateImage.width;
        canvas.height = certificateImage.height;

        // Draw the certificate image on the canvas
        context.drawImage(certificateImage, 0, 0);

        // Get the user's name and date from the page
        const name = document.getElementById("certName").textContent;
        const date = document.getElementById("certDate").textContent;

        // Set text styles
        context.font = '24px Arial';
        context.fillStyle = 'black';
        context.textAlign = 'center';

        // Draw the name and date onto the image
        context.fillText(name, canvas.width / 2, 250); // Adjust Y-position as needed
        context.fillText(date, canvas.width / 2, 300); // Adjust Y-position as needed

        // Trigger download
        const dataUrl = canvas.toDataURL('image/png');
        const a = document.createElement('a');
        a.href = dataUrl;
        a.download = 'Personalized_Certificate.png';
        a.click();
      };
    }
  </script>
</body>
</html>
