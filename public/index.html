<script>
  // Register form handler
  document.getElementById('register-form').addEventListener('submit', async (event) => {
    event.preventDefault();

    const username = document.getElementById('register-username').value;
    const password = document.getElementById('register-password').value;

    const response = await fetch('https://your-heroku-app-url/register', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ username, password }),
    });

    const data = await response.json();
    alert(data.message);  // Show response message from backend

    if (response.ok) {
      // Instead of redirecting, show an alert for testing
      alert('Redirecting to login...');
      window.location.href = '/login'; // Redirection to login
    }
  });

  // Login form handler
  document.getElementById('login-form').addEventListener('submit', async (event) => {
    event.preventDefault();

    const username = document.getElementById('login-username').value;
    const password = document.getElementById('login-password').value;

    const response = await fetch('https://your-heroku-app-url/login', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ username, password }),
    });

    const data = await response.json();

    if (data.token) {
      alert('Login successful! Redirecting to deposit...');
      // Show an alert first to confirm
      window.location.href = '/deposit'; // Redirection to deposit page
    } else {
      alert('Error: ' + data.error);
    }
  });
</script>
